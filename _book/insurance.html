<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Insurance | Machine Learning Application in Industry</title>
  <meta name="description" content="This is guide for Product Team Algoritma." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Insurance | Machine Learning Application in Industry" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is guide for Product Team Algoritma." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Insurance | Machine Learning Application in Industry" />
  
  <meta name="twitter:description" content="This is guide for Product Team Algoritma." />
  

<meta name="author" content="Algoritma Team" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="retail.html"/>
<link rel="next" href="bioinformatics.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/wordcloud2-0.0.1/wordcloud.css" rel="stylesheet" />
<script src="libs/wordcloud2-0.0.1/wordcloud2-all.js"></script>
<script src="libs/wordcloud2-0.0.1/hover.js"></script>
<script src="libs/wordcloud2-binding-0.2.1/wordcloud2.js"></script>
<link href="libs/plot_text_explanations-0.1.0/plot_text_explanations.css" rel="stylesheet" />
<script src="libs/plot_text_explanations-binding-0.5.1/plot_text_explanations.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="assets\book.css" type="text/css" />
<link rel="stylesheet" href="https:\\use.fontawesome.com\releases\v5.3.1\css\all.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Algoritma Book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="telecommunication.html"><a href="telecommunication.html"><i class="fa fa-check"></i><b>2</b> Telecommunication</a><ul>
<li class="chapter" data-level="2.1" data-path="telecommunication.html"><a href="telecommunication.html#customer-churn-prediction"><i class="fa fa-check"></i><b>2.1</b> Customer Churn Prediction</a><ul>
<li class="chapter" data-level="2.1.1" data-path="telecommunication.html"><a href="telecommunication.html#background"><i class="fa fa-check"></i><b>2.1.1</b> Background</a></li>
<li class="chapter" data-level="2.1.2" data-path="telecommunication.html"><a href="telecommunication.html#modelling-analysis"><i class="fa fa-check"></i><b>2.1.2</b> Modelling Analysis</a></li>
<li class="chapter" data-level="2.1.3" data-path="telecommunication.html"><a href="telecommunication.html#conclusion"><i class="fa fa-check"></i><b>2.1.3</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="finance.html"><a href="finance.html"><i class="fa fa-check"></i><b>3</b> Finance</a><ul>
<li class="chapter" data-level="3.1" data-path="finance.html"><a href="finance.html#credit-risk-analysis"><i class="fa fa-check"></i><b>3.1</b> Credit Risk Analysis</a><ul>
<li class="chapter" data-level="3.1.1" data-path="finance.html"><a href="finance.html#background-1"><i class="fa fa-check"></i><b>3.1.1</b> Background</a></li>
<li class="chapter" data-level="3.1.2" data-path="finance.html"><a href="finance.html#modelling-analysis-1"><i class="fa fa-check"></i><b>3.1.2</b> Modelling Analysis</a></li>
<li class="chapter" data-level="3.1.3" data-path="finance.html"><a href="finance.html#recommendation"><i class="fa fa-check"></i><b>3.1.3</b> Recommendation</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="finance.html"><a href="finance.html#evaluating-customer-financial-complaints"><i class="fa fa-check"></i><b>3.2</b> Evaluating Customer Financial Complaints</a><ul>
<li class="chapter" data-level="3.2.1" data-path="finance.html"><a href="finance.html#background-2"><i class="fa fa-check"></i><b>3.2.1</b> Background</a></li>
<li class="chapter" data-level="3.2.2" data-path="finance.html"><a href="finance.html#exploratory-data-analysis-1"><i class="fa fa-check"></i><b>3.2.2</b> Exploratory Data Analysis</a></li>
<li class="chapter" data-level="3.2.3" data-path="finance.html"><a href="finance.html#comparing-sentiment-dictionaries"><i class="fa fa-check"></i><b>3.2.3</b> Comparing Sentiment Dictionaries</a></li>
<li class="chapter" data-level="3.2.4" data-path="finance.html"><a href="finance.html#correlation-pairs"><i class="fa fa-check"></i><b>3.2.4</b> Correlation Pairs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="retail.html"><a href="retail.html"><i class="fa fa-check"></i><b>4</b> Retail</a><ul>
<li class="chapter" data-level="4.1" data-path="retail.html"><a href="retail.html#e-commerce-clothing-reviews"><i class="fa fa-check"></i><b>4.1</b> E-Commerce Clothing Reviews</a><ul>
<li class="chapter" data-level="4.1.1" data-path="retail.html"><a href="retail.html#background-3"><i class="fa fa-check"></i><b>4.1.1</b> Background</a></li>
<li class="chapter" data-level="4.1.2" data-path="retail.html"><a href="retail.html#cleaning-data"><i class="fa fa-check"></i><b>4.1.2</b> Cleaning Data</a></li>
<li class="chapter" data-level="4.1.3" data-path="retail.html"><a href="retail.html#modelling-2"><i class="fa fa-check"></i><b>4.1.3</b> Modelling</a></li>
<li class="chapter" data-level="4.1.4" data-path="retail.html"><a href="retail.html#visualize-data-text"><i class="fa fa-check"></i><b>4.1.4</b> Visualize Data Text</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="insurance.html"><a href="insurance.html"><i class="fa fa-check"></i><b>5</b> Insurance</a><ul>
<li class="chapter" data-level="5.1" data-path="insurance.html"><a href="insurance.html#prediction-of-total-claim-amount"><i class="fa fa-check"></i><b>5.1</b> Prediction of Total Claim Amount</a><ul>
<li class="chapter" data-level="5.1.1" data-path="insurance.html"><a href="insurance.html#background-4"><i class="fa fa-check"></i><b>5.1.1</b> Background</a></li>
<li class="chapter" data-level="5.1.2" data-path="insurance.html"><a href="insurance.html#modelling-analysis-2"><i class="fa fa-check"></i><b>5.1.2</b> Modelling Analysis</a></li>
<li class="chapter" data-level="5.1.3" data-path="insurance.html"><a href="insurance.html#conclusion-1"><i class="fa fa-check"></i><b>5.1.3</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="bioinformatics.html"><a href="bioinformatics.html"><i class="fa fa-check"></i><b>6</b> Bioinformatics</a><ul>
<li class="chapter" data-level="6.1" data-path="bioinformatics.html"><a href="bioinformatics.html#qtl-mapping-for-disease-resistance"><i class="fa fa-check"></i><b>6.1</b> QTL Mapping for Disease Resistance</a><ul>
<li class="chapter" data-level="6.1.1" data-path="bioinformatics.html"><a href="bioinformatics.html#backgorund"><i class="fa fa-check"></i><b>6.1.1</b> Backgorund</a></li>
<li class="chapter" data-level="6.1.2" data-path="bioinformatics.html"><a href="bioinformatics.html#modelling-analysis-3"><i class="fa fa-check"></i><b>6.1.2</b> Modelling Analysis</a></li>
<li class="chapter" data-level="6.1.3" data-path="bioinformatics.html"><a href="bioinformatics.html#conclusion-2"><i class="fa fa-check"></i><b>6.1.3</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="public-health.html"><a href="public-health.html"><i class="fa fa-check"></i><b>7</b> Public Health</a><ul>
<li class="chapter" data-level="7.1" data-path="public-health.html"><a href="public-health.html#survival-analysis-of-patients-with-lung-cancer"><i class="fa fa-check"></i><b>7.1</b> Survival Analysis of Patients with Lung Cancer</a><ul>
<li class="chapter" data-level="7.1.1" data-path="public-health.html"><a href="public-health.html#import-data-3"><i class="fa fa-check"></i><b>7.1.1</b> Import Data</a></li>
<li class="chapter" data-level="7.1.2" data-path="public-health.html"><a href="public-health.html#exploratory-data-analysis-3"><i class="fa fa-check"></i><b>7.1.2</b> Exploratory Data Analysis</a></li>
<li class="chapter" data-level="7.1.3" data-path="public-health.html"><a href="public-health.html#modelling-analysis-4"><i class="fa fa-check"></i><b>7.1.3</b> Modelling Analysis</a></li>
<li class="chapter" data-level="7.1.4" data-path="public-health.html"><a href="public-health.html#conclusion-3"><i class="fa fa-check"></i><b>7.1.4</b> Conclusion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="media.html"><a href="media.html"><i class="fa fa-check"></i><b>8</b> Media</a><ul>
<li class="chapter" data-level="8.1" data-path="media.html"><a href="media.html#causal-impact-on-leads-generation"><i class="fa fa-check"></i><b>8.1</b> Causal Impact on Leads generation</a><ul>
<li class="chapter" data-level="8.1.1" data-path="media.html"><a href="media.html#background-5"><i class="fa fa-check"></i><b>8.1.1</b> Background</a></li>
<li class="chapter" data-level="8.1.2" data-path="media.html"><a href="media.html#modelling-analysis-5"><i class="fa fa-check"></i><b>8.1.2</b> Modelling Analysis</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://algorit.ma/" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Machine Learning Application in Industry</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="insurance" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Insurance</h1>
<style>
body {
text-align: justify}
</style>
<div id="prediction-of-total-claim-amount" class="section level2">
<h2><span class="header-section-number">5.1</span> Prediction of Total Claim Amount</h2>
<div id="background-4" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Background</h3>
<p>Seiring tingkat kompetisi yang semakin tinggi di industri asuransi, perusahaan dituntut untuk selalu memberikan terobosan dan strategi untuk memberikan layanan yang terbaik untuk nasabahnya. Salah satu aset utama perusahaan asuransi tentunya adalah data nasabah dan riwayat polis. Tentunya dengan adanya data yang dimiliki oleh perusahaan, dapat dimanfaatkan dalam upaya pengambilan keputusan strategis.</p>
<p>Perusahaan memiliki kebutuhan untuk memperhitungkan pembayaran klaim di masa depan. Tanggung jawab tersebut biasa dikenal sebagai cadangan klaim. Karena cadangkan klaim adalah kewajiban yang harus dipersiapkan untuk masa yang akan datang, nilai pastinya tidak diketahui dan harus diperkirakan.</p>
<p>Risiko yang dimiliki oleh setiap nasabah tentunya bervariasi, faktor-faktor yang berhubungan dengan risiko tentunya membantu dalam memprediksi biaya klaim yang harus dibayarkan. Tujuan dari analysis ini adalah untuk memprediksi besarnya klaim yang harus diberikan oleh perusahaan untuk setiap nasabahnya, hasil prediksi diperoleh dengan mempelajari karakteristik dan profil dari nasabah tersebut.</p>
</div>
<div id="modelling-analysis-2" class="section level3">
<h3><span class="header-section-number">5.1.2</span> Modelling Analysis</h3>
<div id="import-data-1" class="section level4">
<h4><span class="header-section-number">5.1.2.1</span> Import Data</h4>
<p>Data yang digunakan merupakan profil data nasabah asuransi kendaraan beserta total claim dari masing-masing nasabah yang diperoleh dari <a href="https://github.com/ccpintoiu/Prediction-of-Claim-Amount-in-Vehicle-Insurance">link berikut.</a> Data tersebut berisikan 9134 observasi atau sebanyak jumlah nasabah yang dimiliki, beserta 26 kolom. Target variabel pada data ini adalah <code>Total.Claim.Amount</code>, kita akan memprediksi total claim amount untuk setiap nasabah, harapannya perusahaan asuransi dapat mengetahui dana yang harus disiapkan untuk membayar klaim.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1">insurance &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;assets/04-insurance/Auto_Insurance_Claims_Sample.csv&quot;</span>)  </a>
<a class="sourceLine" id="cb91-2" title="2"><span class="kw">head</span>(insurance)</a></code></pre></div>
<pre><code>#&gt;   Customer Country State.Code    State Claim.Amount Response
#&gt; 1  BU79786      US         KS   Kansas     276.3519       No
#&gt; 2  QZ44356      US         NE Nebraska     697.9536       No
#&gt; 3  AI49188      US         OK Oklahoma    1288.7432       No
#&gt; 4  WW63253      US         MO Missouri     764.5862       No
#&gt; 5  HB64268      US         KS   Kansas     281.3693       No
#&gt; 6  OC83172      US         IA     Iowa     825.6298      Yes
#&gt;   Coverage Education Effective.To.Date EmploymentStatus Gender
#&gt; 1    Basic  Bachelor           2/24/11         Employed      F
#&gt; 2 Extended  Bachelor           1/31/11       Unemployed      F
#&gt; 3  Premium  Bachelor           2/19/11         Employed      F
#&gt; 4    Basic  Bachelor           1/20/11       Unemployed      M
#&gt; 5    Basic  Bachelor            2/3/11         Employed      M
#&gt; 6    Basic  Bachelor           1/25/11         Employed      F
#&gt;   Income Location.Code Marital.Status Monthly.Premium.Auto
#&gt; 1  56274      Suburban        Married                   69
#&gt; 2      0      Suburban         Single                   94
#&gt; 3  48767      Suburban        Married                  108
#&gt; 4      0      Suburban        Married                  106
#&gt; 5  43836         Rural         Single                   73
#&gt; 6  62902         Rural        Married                   69
#&gt;   Months.Since.Last.Claim Months.Since.Policy.Inception
#&gt; 1                      32                             5
#&gt; 2                      13                            42
#&gt; 3                      18                            38
#&gt; 4                      18                            65
#&gt; 5                      12                            44
#&gt; 6                      14                            94
#&gt;   Number.of.Open.Complaints Number.of.Policies    Policy.Type
#&gt; 1                         0                  1 Corporate Auto
#&gt; 2                         0                  8  Personal Auto
#&gt; 3                         0                  2  Personal Auto
#&gt; 4                         0                  7 Corporate Auto
#&gt; 5                         0                  1  Personal Auto
#&gt; 6                         0                  2  Personal Auto
#&gt;         Policy Claim.Reason Sales.Channel Total.Claim.Amount
#&gt; 1 Corporate L3    Collision         Agent           384.8111
#&gt; 2  Personal L3 Scratch/Dent         Agent          1131.4649
#&gt; 3  Personal L3    Collision         Agent           566.4722
#&gt; 4 Corporate L2    Collision   Call Center           529.8813
#&gt; 5  Personal L1    Collision         Agent           138.1309
#&gt; 6  Personal L3         Hail           Web           159.3830
#&gt;   Vehicle.Class Vehicle.Size
#&gt; 1  Two-Door Car      Medsize
#&gt; 2 Four-Door Car      Medsize
#&gt; 3  Two-Door Car      Medsize
#&gt; 4           SUV      Medsize
#&gt; 5 Four-Door Car      Medsize
#&gt; 6  Two-Door Car      Medsize</code></pre>
</div>
<div id="exploratory-data-1" class="section level4">
<h4><span class="header-section-number">5.1.2.2</span> Exploratory Data</h4>
<p>Selanjutnya melihat structure data dari masing-masing variabel, jika terdapat variabel yang belum sesuai tipe datanya perlu dilakukan <code>explicit coercion</code>.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1"><span class="kw">str</span>(insurance)</a></code></pre></div>
<pre><code>#&gt; &#39;data.frame&#39;:    9134 obs. of  26 variables:
#&gt;  $ Customer                     : Factor w/ 9134 levels &quot;AA10041&quot;,&quot;AA11235&quot;,..: 601 5947 97 8017 2489 4948 8434 756 1352 548 ...
#&gt;  $ Country                      : Factor w/ 1 level &quot;US&quot;: 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  $ State.Code                   : Factor w/ 5 levels &quot;IA&quot;,&quot;KS&quot;,&quot;MO&quot;,..: 2 4 5 3 2 1 1 4 1 1 ...
#&gt;  $ State                        : Factor w/ 5 levels &quot;Iowa&quot;,&quot;Kansas&quot;,..: 2 4 5 3 2 1 1 4 1 1 ...
#&gt;  $ Claim.Amount                 : num  276 698 1289 765 281 ...
#&gt;  $ Response                     : Factor w/ 2 levels &quot;No&quot;,&quot;Yes&quot;: 1 1 1 1 1 2 2 1 2 1 ...
#&gt;  $ Coverage                     : Factor w/ 3 levels &quot;Basic&quot;,&quot;Extended&quot;,..: 1 2 3 1 1 1 1 3 1 2 ...
#&gt;  $ Education                    : Factor w/ 5 levels &quot;Bachelor&quot;,&quot;College&quot;,..: 1 1 1 1 1 1 2 5 1 2 ...
#&gt;  $ Effective.To.Date            : Factor w/ 59 levels &quot;1/1/11&quot;,&quot;1/10/11&quot;,..: 48 25 42 13 53 18 48 10 19 40 ...
#&gt;  $ EmploymentStatus             : Factor w/ 5 levels &quot;Disabled&quot;,&quot;Employed&quot;,..: 2 5 2 5 2 2 2 5 3 2 ...
#&gt;  $ Gender                       : Factor w/ 2 levels &quot;F&quot;,&quot;M&quot;: 1 1 1 2 2 1 1 2 2 1 ...
#&gt;  $ Income                       : int  56274 0 48767 0 43836 62902 55350 0 14072 28812 ...
#&gt;  $ Location.Code                : Factor w/ 3 levels &quot;Rural&quot;,&quot;Suburban&quot;,..: 2 2 2 2 1 1 2 3 2 3 ...
#&gt;  $ Marital.Status               : Factor w/ 3 levels &quot;Divorced&quot;,&quot;Married&quot;,..: 2 3 2 2 3 2 2 3 1 2 ...
#&gt;  $ Monthly.Premium.Auto         : int  69 94 108 106 73 69 67 101 71 93 ...
#&gt;  $ Months.Since.Last.Claim      : int  32 13 18 18 12 14 0 0 13 17 ...
#&gt;  $ Months.Since.Policy.Inception: int  5 42 38 65 44 94 13 68 3 7 ...
#&gt;  $ Number.of.Open.Complaints    : int  0 0 0 0 0 0 0 0 0 0 ...
#&gt;  $ Number.of.Policies           : int  1 8 2 7 1 2 9 4 2 8 ...
#&gt;  $ Policy.Type                  : Factor w/ 3 levels &quot;Corporate Auto&quot;,..: 1 2 2 1 2 2 1 1 1 3 ...
#&gt;  $ Policy                       : Factor w/ 9 levels &quot;Corporate L1&quot;,..: 3 6 6 2 4 6 3 3 3 8 ...
#&gt;  $ Claim.Reason                 : Factor w/ 4 levels &quot;Collision&quot;,&quot;Hail&quot;,..: 1 4 1 1 1 2 1 1 1 2 ...
#&gt;  $ Sales.Channel                : Factor w/ 4 levels &quot;Agent&quot;,&quot;Branch&quot;,..: 1 1 1 3 1 4 1 1 1 2 ...
#&gt;  $ Total.Claim.Amount           : num  385 1131 566 530 138 ...
#&gt;  $ Vehicle.Class                : Factor w/ 6 levels &quot;Four-Door Car&quot;,..: 6 1 6 5 1 6 1 1 1 1 ...
#&gt;  $ Vehicle.Size                 : Factor w/ 3 levels &quot;Large&quot;,&quot;Medsize&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...</code></pre>
<p>Berikutnya kita perlu inspect persebaran data yang dimilih baik data kategorik dan numerik, kita dapat menggunakan package <code>inspectdf</code> untuk eksplorasi berikut ini.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1">insurance <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inspect_cat</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">show_plot</span>()</a></code></pre></div>
<p><img src="bookmlindustry_files/figure-html/unnamed-chunk-75-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" title="1">insurance <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">inspect_num</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">show_plot</span>()</a></code></pre></div>
<p><img src="bookmlindustry_files/figure-html/unnamed-chunk-76-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Dari hasil kedua plot diatas berikutnya membuang variabel yang tidak dibutuhkan dalam model. Variabel <code>customer</code> merupakan data unique dari ID setiap customer, oleh karena itu kita akan membuang variabel tersebut. Variabel <code>country</code> tidak banyak memberikan informasi, karena semua observasi berisikan informasi yang sama. Variabel <code>State.Code</code> juga memberikan informasi yang sama dengan variabel <code>State</code>, oleh karena itu kita akan menggunakan salah satu dari kedua variabel tersebut yaitu variabel <code>State</code>. Sedangkan untuk variabel <code>Policy</code> kita hilangkan karena informasi yang diberikan juga sama dengan variabel <code>Policy.Type</code>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1">insurance &lt;-<span class="st"> </span>insurance <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb97-2" title="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(Customer, Country, State.Code,</a>
<a class="sourceLine" id="cb97-3" title="3">            Effective.To.Date, Policy))</a></code></pre></div>
<p>Selanjutnya, split data menjadi data train dan data test dengan proporsi 80:20.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" title="1"><span class="kw">set.seed</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb98-2" title="2">idx &lt;-<span class="st"> </span><span class="kw">initial_split</span>(<span class="dt">data =</span> insurance,<span class="dt">prop =</span> <span class="fl">0.8</span>)</a>
<a class="sourceLine" id="cb98-3" title="3">claim_train &lt;-<span class="st"> </span><span class="kw">training</span>(idx)</a>
<a class="sourceLine" id="cb98-4" title="4">claim_test &lt;-<span class="st"> </span><span class="kw">testing</span>(idx)</a></code></pre></div>
</div>
<div id="modelling-3" class="section level4">
<h4><span class="header-section-number">5.1.2.3</span> Modelling</h4>
<p>Kemudian bentuk model random forest, tentukan target variabel dan prediktor yang digunakan.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" title="1"><span class="kw">library</span>(randomForest)</a>
<a class="sourceLine" id="cb99-2" title="2">forest_claim &lt;-<span class="st"> </span><span class="kw">randomForest</span>(Total.Claim.Amount<span class="op">~</span>.,<span class="dt">data =</span> claim_train, <span class="dt">localImp =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb99-3" title="3"><span class="co">#saveRDS(forest_claim,&quot;forest_claim.RDS&quot;)</span></a></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1">forest_claim &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;assets/04-insurance/forest_claim.RDS&quot;</span>)</a>
<a class="sourceLine" id="cb100-2" title="2">forest_claim</a></code></pre></div>
<pre><code>#&gt; 
#&gt; Call:
#&gt;  randomForest(formula = Total.Claim.Amount ~ ., data = claim_train,      localImp = TRUE) 
#&gt;                Type of random forest: regression
#&gt;                      Number of trees: 500
#&gt; No. of variables tried at each split: 6
#&gt; 
#&gt;           Mean of squared residuals: 12764.93
#&gt;                     % Var explained: 84.8</code></pre>
<p>Model memiliki kemampuan menjelaskan variasi data sebesar 84.8%, sedangkan sisanya sebesar 15.2% dijelaskan oleh variabel lain yang tidak digunakan pada model. Untuk mengetahui variabel yang paling berpengaruh pada model, kita dapat melihat <code>variabel importance</code>.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1"><span class="kw">varImpPlot</span>(forest_claim, <span class="dt">main =</span> <span class="st">&quot;Variable Importance&quot;</span>,<span class="dt">n.var =</span> <span class="dv">5</span>)</a></code></pre></div>
<p><img src="bookmlindustry_files/figure-html/unnamed-chunk-81-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Nilai importance atau tingkat kepentingannya terdapat dua penilaian yaitu <code>IncMSE</code> dan <code>IncNodePurity</code>. Untuk <code>IncMSE</code> diperoleh dari error pada OOB (out of bag) data, kemudian di rata-ratakan untuk semua pohon, dan dinormalisasi dengan standar deviasi. Untuk <code>IncNodePurity</code> merupakan total penurunan impurity dari masing-masing variabel. Untuk kasus klasifikasi node impurity diperoleh dari nilai gini index, sedangkan untuk kasus regresi diperoleh dari SSE (Sum Square Error).</p>
<p>Untuk mengetahui peran variabel dalam pembuatan model, kita dapat memanfaatkan package <code>randomForestExplainer</code> yang menyediakan beberapa function untuk memperoleh informasi mengenai variabel importance.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1">mindepth_frame &lt;-<span class="st"> </span><span class="kw">min_depth_distribution</span>(forest_claim)</a>
<a class="sourceLine" id="cb103-2" title="2"><span class="co">#saveRDS(mindepth_frame, &quot;mindepthframe.rds&quot;)</span></a></code></pre></div>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb104-1" title="1">mindepth_frame &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;assets/04-insurance/mindepthframe.rds&quot;</span>)</a>
<a class="sourceLine" id="cb104-2" title="2"><span class="kw">plot_min_depth_distribution</span>(mindepth_frame, <span class="dt">mean_sample =</span> <span class="st">&quot;top_trees&quot;</span>)</a></code></pre></div>
<p><img src="bookmlindustry_files/figure-html/unnamed-chunk-83-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Plot tersebut memberikan informasi mengenai nilai <code>mean minimal dept</code> untuk setiap variabel. Semakin kecil nilai minimal depth artinya semakin penting variabel tersebut pada model. Semakin besar proporsi minimal dept pada warna merah mudah (mendekati 0), artinya variabel tersebut sering dijadikan sebagai root node, yaitu variabel utama yang digunakan untuk menentukan nilai target.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1">imp_frame &lt;-<span class="st"> </span><span class="kw">measure_importance</span>(forest_claim)</a>
<a class="sourceLine" id="cb105-2" title="2"><span class="co">#saveRDS(imp_frame,&quot;imp_frame.rds&quot;)</span></a></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" title="1">imp_frame &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&quot;assets/04-insurance/imp_frame.rds&quot;</span>)</a>
<a class="sourceLine" id="cb106-2" title="2"><span class="kw">plot_multi_way_importance</span>(imp_frame, <span class="dt">size_measure =</span> <span class="st">&quot;no_of_nodes&quot;</span>,<span class="dt">no_of_labels =</span> <span class="dv">6</span>)</a></code></pre></div>
<p><img src="bookmlindustry_files/figure-html/unnamed-chunk-85-1.png" width="672" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1"><span class="kw">plot_multi_way_importance</span>(imp_frame, <span class="dt">x_measure =</span> <span class="st">&quot;mse_increase&quot;</span>,</a>
<a class="sourceLine" id="cb107-2" title="2">                          <span class="dt">size_measure =</span> <span class="st">&quot;p_value&quot;</span>, <span class="dt">no_of_labels =</span> <span class="dv">6</span>)</a></code></pre></div>
<p><img src="bookmlindustry_files/figure-html/unnamed-chunk-86-1.png" width="672" style="display: block; margin: auto;" /></p>
<p>Perbandingan dari ketiga plot, terdapat 5 variabel yaitu location code, monthly premium auto, vehicle class, income, dan claim amount yang selalu muncul dari ketiga plot tersebut. Artinya kelima variabel tersebut dapat dikatakan variabel yang paling berpengaruh dan banyak digunakan dalam pembuatan pohon.</p>
<p>Berikutnya lakukan prediksi untuk data test, kemudian cari nilai error dari hasil prediksi</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" title="1">claim_test<span class="op">$</span>pred &lt;-<span class="st"> </span><span class="kw">predict</span>(<span class="dt">object =</span> forest_claim,<span class="dt">newdata =</span> claim_test)</a></code></pre></div>
<p>Mencari nilai RMSE (Root Mean Squared Error)</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1">MLmetrics<span class="op">::</span><span class="kw">RMSE</span>(<span class="dt">y_pred =</span> claim_test<span class="op">$</span>pred,<span class="dt">y_true =</span> claim_test<span class="op">$</span>Total.Claim.Amount)</a></code></pre></div>
<pre><code>#&gt; [1] 62.59351</code></pre>
<p>RMSE merupakan nilai rata rata dari jumlah kuadrat error yang menyatakan ukuran besarnya kesalahan yang dihasilkan oleh model. Nilai RMSE rendah menunjukkan bahwa variasi nilai yang dihasilkan oleh model mendekasi variasi nilai observasinya. Jika dilihat dari 5 number summary variabel total claim amount, nilai RMSE yang diperoleh sebesar 119.9 dapat dikatakan sudah cukup baik.</p>
</div>
</div>
<div id="conclusion-1" class="section level3">
<h3><span class="header-section-number">5.1.3</span> Conclusion</h3>
<p>Untuk memprediksi nilai <code>Total Claim Amount</code> model ini memiliki kemampuan menjelaskan variasi data sebesar 84.8% dan variabel yang paling mempengaruhi target adalah variabel location code, monthly premium auto, vehicle class, income, dan claim amount. Hasil error yang diperoleh dari model tersebut cukup baik dalam memprediksi data.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="retail.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bioinformatics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"all": null
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
